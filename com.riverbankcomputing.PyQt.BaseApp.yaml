app-id: com.riverbankcomputing.PyQt.BaseApp
branch: '6.4'
runtime: org.kde.Platform
runtime-version: '6.4'
sdk: org.kde.Sdk
#command: QtWebEngineProcess
separate-locales: false
#base: io.qt.qtwebengine.BaseApp
#base-version: '6.3'
x-base-commit: 3f822959b34b7eedcbf37b6e1e4c1a746f8f30b65d3813d87d38281a7626fb47
modules:
  - name: lib_python
    buildsystem: simple
    build-commands:
      - install -dm755 ${FLATPAK_DEST}/lib
      - ln -s python$(python -c 'import sys; print("%s.%s" %sys.version_info[0:2])') ${FLATPAK_DEST}/lib/python
  - python-packaging-tools/python-packaging-tools.json
  - pyqt/pyqt.json
  #- pyqt-webengine/pyqt-webengine.json
  - name: polish
    buildsystem: simple
    build-commands:
      #- mv ${FLATPAK_DEST}/cleanup-BaseApp{,-QtWebEngine}.sh
      - install -Dm755 cleanup.sh ${FLATPAK_DEST}/cleanup-BaseApp.sh
      - install -Dm644 ${FLATPAK_ID}.metainfo.xml -t ${FLATPAK_DEST}/share/metainfo/
    sources:
      - type: file
        path: cleanup.sh
      - type: file
        path: com.riverbankcomputing.PyQt.BaseApp.metainfo.xml
